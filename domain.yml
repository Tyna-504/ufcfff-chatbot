version: '3.1'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

intents:
- affirm
- bot_challenge
- bot_query
- buy_car
- deny
- goodbye
- greet
- inform
- stop
- request_car_form
- query_car
- ask_body_type
- ask_engine
- ask_fuel
- ask_transmission

entities:
- body_type
- engine
- fuel
- transmission
#- model_name

forms:
  car_form:
    required_slots:
    - body_type
    - engine
    - fuel
    - transmission

slots:
  body_type: #slot 1
    type: categorical
    values:
    - saloon
    - SUV
    - hatchback
    - estate
    - coupe
    - cabriolet
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: body_type
  engine: #slot 2
    type: categorical
    values:
    - combustion engine
    - electric
    - mild hybrid
    - plug-in hybrid
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: engine 
  fuel: #slot 3
    type: categorical
    values:
    - diesel
    - petrol
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: fuel
  transmission: #slot 4
    type: categorical
    values:
    - automatic
    - manual
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: transmission
  #model_name: #slot 5
  #- type:

responses:
  utter_greet:
  - text: Hello, I am a virtual Mercedes-Benz car selling assitant. How can I help you?
  utter_goodbye:
  - text: Goodbye, thank you for using the Mercedes chatbot!
  utter_iamabot:
  - text: I am a bot here to support you with communicating with Mercedes-Benz UK. I am powered by Rasa.
  utter_capability:
  - text: I am a virtual assitant helping you choose the correct Mercedes model for you. There are currently over 100 models in production.
  utter_submit:
  - text: Thank you, your preferences have been recorded!
  utter_car_slots:
    - condition:  # a conditional response
        - type: slot
          name: engine
          value: "electric"
      text: "I am searching for an electric {body_type} Mercedes."
    - condition:
        - type: slot
          name: engine
          value: "combustion engine"
      text: "I am searching for a {body_type} Mercedes with {fuel} {engine} and {transmission} transmission."
    - condition:
        - type: slot
          name: engine
          value: "mild hybrid"
      text: "I am searching for a {body_type} Mercedes with {fuel} {engine} engine and {transmission} transmission."
    - condition:
      - type: slot
        name: engine
        value: "plug-in hybrid"
      text: "I am searching for a {body_type} Mercedes with {fuel} {engine} engine and {transmission} transmission."     
  utter_ask_continue:
  - text: Are you sure you want to stop the form?
  utter_ask_car_form_body_type:
  - text: What body type are you looking for?
  utter_ask_car_form_engine:
  - text: What engine are you looking for?
  utter_ask_car_form_fuel:
  - text: What fuel type are you looking for?
  utter_ask_car_form_transmission:
  - text: What transmission are you looking for?

actions:
- utter_ask_car_form_body_type
- utter_ask_car_form_fuel
- utter_ask_car_form_engine
- utter_ask_car_form_transmission
- utter_ask_continue
- utter_capability
- utter_car_slots
- utter_goodbye
- utter_greet
- utter_iamabot
- utter_submit
- validate_car_form
- query_car
- dispatch_car_explanations